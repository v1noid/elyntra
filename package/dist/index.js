#!/usr/bin/env node
'use strict';var u=require('os'),n=require('fs'),commander=require('commander'),i=require('ora'),child_process=require('child_process');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var u__default=/*#__PURE__*/_interopDefault(u);var n__default=/*#__PURE__*/_interopDefault(n);var i__default=/*#__PURE__*/_interopDefault(i);var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var h=p(()=>{var o=u__default.default.tmpdir()+"/"+crypto.randomUUID(),c=process.cwd(),a="template",l=new commander.Command,y=["git init","git remote add origin https://github.com/v1noid/elyntra.git","git config core.sparseCheckout true",`echo '${a}' >> .git/info/sparse-checkout`,"git pull origin main"];async function s(t,e){for(let r of t){let [d,...m]=r.split(" ");child_process.spawnSync(d,m,{cwd:e||o});}}var w=t=>i__default.default({spinner:"bouncingBall",text:t});l.command("init <name>").description("Initialize the server folder in just a click").action(async t=>{try{let e=w("Downloading template...").start();n__default.default.mkdirSync(o),await s(y).catch(r=>{e.fail("Failed to download template!"),console.error(r);}),e.succeed("Downloaded template successfully!"),e=i__default.default("Copying files...").start(),n__default.default.rmSync(o+"/.git",{recursive:!0,force:!0}),n__default.default.cpSync(o+"/"+a,c+"/"+t,{recursive:!0}),n__default.default.rmSync(o,{recursive:!0,force:!0}),e.succeed(`Server (${t}) folder initialized successfully!`),e=i__default.default("Installing dependencies...").start(),await s(["bun i"],c+"/"+t).catch(r=>{e.fail("Failed to install dependencies!"),console.error(r);}),e.succeed("Dependencies installed successfully!");}catch(e){console.error(`
Failed to set up elyntra: `,e);}});l.parse(process.argv);});var index = h();module.exports=index;